<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Do'kon Boshqaruv Paneli{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <style>
    body { background:#eef2f6; margin:0; }
    .app { display:flex; min-height:100vh; }

    .sidebar{
      width:240px;
      background:#1f2d3d;
      color:#fff;
      padding:15px;
    }

    .sidebar-header{
      display:flex;
      gap:10px;
      align-items:center;
      font-weight:700;
      font-size:18px;
      margin-bottom:20px;
    }

    .side-link{
      display:flex;
      gap:10px;
      align-items:center;
      color:#cfd8e3;
      padding:10px;
      border-radius:8px;
      text-decoration:none;
      margin-bottom:6px;
      transition: .15s;
    }

    .side-link:hover{
      background:#2c3e50;
      color:#fff;
    }

    /* ✅ aktiv menu */
    .side-link.active{
      background:#2c3e50;
      color:#fff;
      font-weight:600;
    }

    .main{ flex:1; display:flex; flex-direction:column; }

    .topbar{
      background:linear-gradient(90deg,#2e6bb8,#3f84d6);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:10px 16px;
      gap:10px;
    }

    .top-title{
      font-size:20px;
      font-weight:700;
      white-space:nowrap;
    }

    .top-actions{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .user-pill{
      background:rgba(255,255,255,.18);
      padding:6px 10px;
      border-radius:999px;
      display:flex;
      gap:8px;
      align-items:center;
      white-space:nowrap;
    }

    .content{ padding:20px; }

    /* Home sahifa uchun */
    .page-title{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
    }

    .muted{ color:#6c757d; font-size:14px; }

    .stats{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:15px;
      margin-bottom:25px;
    }

    .stat{
      padding:15px;
      border-radius:12px;
      color:#fff;
    }

    .stat-value{
      font-size:28px;
      font-weight:bold;
    }

    .green{ background:#28a745; }
    .blue{ background:#007bff; }
    .red{ background:#dc3545; }
    .purple{ background:#6f42c1; }

    .grid-2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
      margin-bottom:20px;
    }

    .card{
      background:#fff;
      padding:20px;
      border-radius:10px;
      box-shadow:0 2px 10px rgba(0,0,0,0.05);
    }

    .card-title{
      font-weight:600;
      margin-bottom:10px;
    }

    .table-wrap{ overflow-x:auto; }

    /* ✅ telefon ekranida moslashsin */
    @media (max-width: 992px){
      .stats{ grid-template-columns:repeat(2,1fr); }
      .grid-2{ grid-template-columns:1fr; }
      .sidebar{ width:220px; }
    }
    @media (max-width: 576px){
      .app{ flex-direction:column; }
      .sidebar{ width:100%; }
    }
  </style>
</head>

<body>
<div class="app">
  <aside class="sidebar">
    <div class="sidebar-header">
      <i class="bi bi-shop"></i>
      <span>Panel</span>
    </div>

    <!-- request.path bo‘yicha aktiv menu -->
    <a class="side-link {% if request.path == '/' %}active{% endif %}" href="{% url 'home' %}">
      <i class="bi bi-speedometer2"></i> Asosiy Panel
    </a>

    <a class="side-link {% if request.path|slice:":7" == '/kirim/' %}active{% endif %}" href="{% url 'kirim' %}">
      <i class="bi bi-arrow-down-circle"></i> Kirimlar
    </a>

    <a class="side-link {% if request.path|slice:":8" == '/chiqim/' %}active{% endif %}" href="{% url 'chiqim' %}">
      <i class="bi bi-arrow-up-circle"></i> Chiqimlar
    </a>

    <a class="side-link {% if request.path|slice:":9" == '/hisobot/' %}active{% endif %}" href="{% url 'hisobot' %}">
      <i class="bi bi-graph-up"></i> Hisobot
    </a>

    <a class="side-link" href="/admin/">
      <i class="bi bi-gear"></i> Admin
    </a>
  </aside>

  <main class="main">
    <header class="topbar">
      <div class="top-title">Do'kon Boshqaruv Paneli</div>

      <div class="top-actions">
        <div class="user-pill">
          <i class="bi bi-person-circle"></i>
          {% if request.user.is_authenticated %}
            {{ request.user.username }}
          {% else %}
            Mehmon
          {% endif %}
        </div>

        {# Agar sizda logout url bo'lsa ishlaydi, bo'lmasa bu tugmani olib tashlang #}
        {# <a class="btn btn-light btn-sm" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right"></i></a> #}
      </div>
    </header>

    <section class="content">
      {% block content %}{% endblock %}
    </section>
  </main>
</div>

</body>
</html>